# 8-2. 다양한 입출력 방법

---

- #### 프로그램 입출력 : 프로그램 속 명령어로 입출력 작업을 하는 방식
  
  - 예제 (메모리에 저장된 정보를 하드디스크에 백업)
    
    - CPU - > 제어 레지스터 , 쓰기명령
    
    - 입출력장치 <-> 상태 레지스터 , 준비완료 표시
    
    - 상태 레지스터 -> CPU, 준비완료 표시 확인
      
      - 풀링(CPU가 주기적으로 상태 레지스터를 확인)
    
    - CPU -> 데이터 레지스터, 저장할 데이터 전송
  
  - 의문점
    
    - CPU는 어떻게 장치 컨트롤러 내에 레지스터를 아는가??
      
      1. 메모리 앱 입출력
      
      2. 고립형 입출력
  * 메모리 맵 입출력 : 메모리에 접근하기 위한 주소 공간과 입출력장치에 접근하기 위한 주소 공간을 하나의 주소 공간으로 간주하는 방식
    
    - 메모리에 접근하는 명령어와 입출력장치에 접근하는 명령어는 같다
    
    - 주소 공간을 입출력장치와 같이 사용하여 메모리 주소 공간 축소
  - 고립형 입출력 : 메모리에 접근하기 위한 주소 공간과 입출력장치에 접근하기 위한 주소 공간을 별도의 주소 공간으로 분리하는 방식
    
    - '메모리 읽기/쓰기'선 이외에 '입출력장치 읽기/쓰기'선이 따로 존재
    
    - 메모리 축소 공간 유지

- #### 인터럽트 기반 입출력 : 인터럽트로써 입출력을 수행하는 방법
  
  - 플래그 레지스터 속 인터럽트 비트가 활성화 된 경우 or 비활성화라도 NMI가 발생한 경우 우선순위가 높은 인터럽트부터 처리
  
  - PIC(하드웨어)
    
    - 인터럽트 우선순위 판별하여 CPU에 전달
    
    - 일반적으로 2개 이상씩 사용 -> 많은 인터럽트를 관리하기 위해
    
    - NMI까지 판별 X -> 우선순위가 가장 높아 판별 불필요
      
      -> 즉, PIC는 인터럽트 비트를 통해서만 막을 수 있는 하드웨어

- #### DMA 입출력 : CPU를 거치지 않고 메모리와 입출력장치 간에 데이터를 주고 받는 방법
  
  - DMA 컨트롤러 : DMA 입출력을 하기 위해 시스템 버스에 연결된 하드웨어
  - 예제 (메모리에 저장된 정보를 하드디스크에 백업)
    - CPU -> DMA 컨트롤러 , 정보와 함께 입출력 작업 명령
    - DMA 컨트롤러 <-> 메모리 , 백업할 정보 읽어오기
    - DMA 컨트롤러 -> 장치 컨트롤러 , 저장할 데이터 전송
    - DMA 컨트롤러 -> CPU , 인터럽트
  - 문제점 : 시스템 버스(공용 자원)를 CPU와 DMA 컨트롤러 동시에 사용 불가
    - 사이클 스틸링 : DMA 컨트롤러가 양해를 구하거나, CPU가 안쓰는 틈에 사용
  - 여전히 CPU에서 입출력 명령어를 인출,해석,실행하는 상당한 역할을 한다
    - 현대에선, IOP(입출력 프로세서)이라는 위에 일들을 대신 해주는 입출력 전용 CPU 개발

- #### 입출력 버스 : 입출력장치와 컴퓨터 내부를 연결 짓는 통로
  
  - 위의 문제점을 해결하기 위해, DMA 컨트롤러와 장치 컨트롤러들을 입출력 버스로 연결하여 시스템 버스 사용 빈도를 줄임 (PCI, PCIe 등)
